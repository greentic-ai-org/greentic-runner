{"$message_type":"diagnostic","message":"method `on_start` has an incompatible type for trait","code":{"code":"E0053","explanation":"The parameters of any trait method must match between a trait implementation\nand the trait definition.\n\nErroneous code example:\n\n```compile_fail,E0053\ntrait Foo {\n    fn foo(x: u16);\n    fn bar(&self);\n}\n\nstruct Bar;\n\nimpl Foo for Bar {\n    // error, expected u16, found i16\n    fn foo(x: i16) { }\n\n    // error, types differ in mutability\n    fn bar(&mut self) { }\n}\n```\n"},"level":"error","spans":[{"file_name":"src/lib.rs","byte_start":1883,"byte_end":1901,"line_start":81,"line_end":81,"column_start":41,"column_end":59,"is_primary":true,"text":[{"text":"    fn on_start(_ctx: ExportExecCtx) -> Result<(), String> {","highlight_start":41,"highlight_end":59}],"label":"expected `LifecycleStatus`, found `()`","suggested_replacement":null,"suggestion_applicability":null,"expansion":null}],"children":[{"message":"type in trait","code":null,"level":"note","spans":[{"file_name":"src/lib.rs","byte_start":24,"byte_end":1538,"line_start":3,"line_end":67,"column_start":1,"column_end":3,"is_primary":true,"text":[{"text":"wit_bindgen::generate!({","highlight_start":1,"highlight_end":25},{"text":"    inline: r#\"","highlight_start":1,"highlight_end":16},{"text":"    package greentic:component@0.4.0;","highlight_start":1,"highlight_end":38},{"text":"","highlight_start":1,"highlight_end":1},{"text":"    interface control {","highlight_start":1,"highlight_end":24},{"text":"      should-cancel: func() -> bool;","highlight_start":1,"highlight_end":37},{"text":"      yield-now: func();","highlight_start":1,"highlight_end":25},{"text":"    }","highlight_start":1,"highlight_end":6},{"text":"","highlight_start":1,"highlight_end":1},{"text":"    interface node {","highlight_start":1,"highlight_end":21},{"text":"      type json = string;","highlight_start":1,"highlight_end":26},{"text":"","highlight_start":1,"highlight_end":1},{"text":"      record tenant-ctx {","highlight_start":1,"highlight_end":26},{"text":"        tenant: string,","highlight_start":1,"highlight_end":24},{"text":"        team: option<string>,","highlight_start":1,"highlight_end":30},{"text":"        user: option<string>,","highlight_start":1,"highlight_end":30},{"text":"        trace-id: option<string>,","highlight_start":1,"highlight_end":34},{"text":"        correlation-id: option<string>,","highlight_start":1,"highlight_end":40},{"text":"        deadline-unix-ms: option<u64>,","highlight_start":1,"highlight_end":39},{"text":"        attempt: u32,","highlight_start":1,"highlight_end":22},{"text":"        idempotency-key: option<string>,","highlight_start":1,"highlight_end":41},{"text":"      }","highlight_start":1,"highlight_end":8},{"text":"","highlight_start":1,"highlight_end":1},{"text":"      record exec-ctx {","highlight_start":1,"highlight_end":24},{"text":"        tenant: tenant-ctx,","highlight_start":1,"highlight_end":28},{"text":"        flow-id: string,","highlight_start":1,"highlight_end":25},{"text":"        node-id: option<string>,","highlight_start":1,"highlight_end":33},{"text":"      }","highlight_start":1,"highlight_end":8},{"text":"","highlight_start":1,"highlight_end":1},{"text":"      record node-error {","highlight_start":1,"highlight_end":26},{"text":"        code: string,","highlight_start":1,"highlight_end":22},{"text":"        message: string,","highlight_start":1,"highlight_end":25},{"text":"        retryable: bool,","highlight_start":1,"highlight_end":25},{"text":"        backoff-ms: option<u64>,","highlight_start":1,"highlight_end":33},{"text":"        details: option<json>,","highlight_start":1,"highlight_end":31},{"text":"      }","highlight_start":1,"highlight_end":8},{"text":"","highlight_start":1,"highlight_end":1},{"text":"      variant invoke-result {","highlight_start":1,"highlight_end":30},{"text":"        ok(json),","highlight_start":1,"highlight_end":18},{"text":"        err(node-error),","highlight_start":1,"highlight_end":25},{"text":"      }","highlight_start":1,"highlight_end":8},{"text":"","highlight_start":1,"highlight_end":1},{"text":"      variant stream-event {","highlight_start":1,"highlight_end":29},{"text":"        data(json),","highlight_start":1,"highlight_end":20},{"text":"        progress(u8),","highlight_start":1,"highlight_end":22},{"text":"        done,","highlight_start":1,"highlight_end":14},{"text":"        error(string),","highlight_start":1,"highlight_end":23},{"text":"      }","highlight_start":1,"highlight_end":8},{"text":"","highlight_start":1,"highlight_end":1},{"text":"      enum lifecycle-status { ok }","highlight_start":1,"highlight_end":35},{"text":"","highlight_start":1,"highlight_end":1},{"text":"      get-manifest: func() -> json;","highlight_start":1,"highlight_end":36},{"text":"      on-start: func(ctx: exec-ctx) -> result<lifecycle-status, string>;","highlight_start":1,"highlight_end":73},{"text":"      on-stop: func(ctx: exec-ctx, reason: string) -> result<lifecycle-status, string>;","highlight_start":1,"highlight_end":88},{"text":"      invoke: func(ctx: exec-ctx, op: string, input: json) -> invoke-result;","highlight_start":1,"highlight_end":77},{"text":"      invoke-stream: func(ctx: exec-ctx, op: string, input: json) -> list<stream-event>;","highlight_start":1,"highlight_end":89},{"text":"    }","highlight_start":1,"highlight_end":6},{"text":"","highlight_start":1,"highlight_end":1},{"text":"    world component {","highlight_start":1,"highlight_end":22},{"text":"      import control;","highlight_start":1,"highlight_end":22},{"text":"      export node;","highlight_start":1,"highlight_end":19},{"text":"    }","highlight_start":1,"highlight_end":6},{"text":"    \"#,","highlight_start":1,"highlight_end":8},{"text":"    world: \"component\",","highlight_start":1,"highlight_end":24},{"text":"});","highlight_start":1,"highlight_end":3}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"src/lib.rs","byte_start":24,"byte_end":1538,"line_start":3,"line_end":67,"column_start":1,"column_end":3,"is_primary":false,"text":[{"text":"wit_bindgen::generate!({","highlight_start":1,"highlight_end":25},{"text":"    inline: r#\"","highlight_start":1,"highlight_end":16},{"text":"    package greentic:component@0.4.0;","highlight_start":1,"highlight_end":38},{"text":"","highlight_start":1,"highlight_end":1},{"text":"    interface control {","highlight_start":1,"highlight_end":24},{"text":"      should-cancel: func() -> bool;","highlight_start":1,"highlight_end":37},{"text":"      yield-now: func();","highlight_start":1,"highlight_end":25},{"text":"    }","highlight_start":1,"highlight_end":6},{"text":"","highlight_start":1,"highlight_end":1},{"text":"    interface node {","highlight_start":1,"highlight_end":21},{"text":"      type json = string;","highlight_start":1,"highlight_end":26},{"text":"","highlight_start":1,"highlight_end":1},{"text":"      record tenant-ctx {","highlight_start":1,"highlight_end":26},{"text":"        tenant: string,","highlight_start":1,"highlight_end":24},{"text":"        team: option<string>,","highlight_start":1,"highlight_end":30},{"text":"        user: option<string>,","highlight_start":1,"highlight_end":30},{"text":"        trace-id: option<string>,","highlight_start":1,"highlight_end":34},{"text":"        correlation-id: option<string>,","highlight_start":1,"highlight_end":40},{"text":"        deadline-unix-ms: option<u64>,","highlight_start":1,"highlight_end":39},{"text":"        attempt: u32,","highlight_start":1,"highlight_end":22},{"text":"        idempotency-key: option<string>,","highlight_start":1,"highlight_end":41},{"text":"      }","highlight_start":1,"highlight_end":8},{"text":"","highlight_start":1,"highlight_end":1},{"text":"      record exec-ctx {","highlight_start":1,"highlight_end":24},{"text":"        tenant: tenant-ctx,","highlight_start":1,"highlight_end":28},{"text":"        flow-id: string,","highlight_start":1,"highlight_end":25},{"text":"        node-id: option<string>,","highlight_start":1,"highlight_end":33},{"text":"      }","highlight_start":1,"highlight_end":8},{"text":"","highlight_start":1,"highlight_end":1},{"text":"      record node-error {","highlight_start":1,"highlight_end":26},{"text":"        code: string,","highlight_start":1,"highlight_end":22},{"text":"        message: string,","highlight_start":1,"highlight_end":25},{"text":"        retryable: bool,","highlight_start":1,"highlight_end":25},{"text":"        backoff-ms: option<u64>,","highlight_start":1,"highlight_end":33},{"text":"        details: option<json>,","highlight_start":1,"highlight_end":31},{"text":"      }","highlight_start":1,"highlight_end":8},{"text":"","highlight_start":1,"highlight_end":1},{"text":"      variant invoke-result {","highlight_start":1,"highlight_end":30},{"text":"        ok(json),","highlight_start":1,"highlight_end":18},{"text":"        err(node-error),","highlight_start":1,"highlight_end":25},{"text":"      }","highlight_start":1,"highlight_end":8},{"text":"","highlight_start":1,"highlight_end":1},{"text":"      variant stream-event {","highlight_start":1,"highlight_end":29},{"text":"        data(json),","highlight_start":1,"highlight_end":20},{"text":"        progress(u8),","highlight_start":1,"highlight_end":22},{"text":"        done,","highlight_start":1,"highlight_end":14},{"text":"        error(string),","highlight_start":1,"highlight_end":23},{"text":"      }","highlight_start":1,"highlight_end":8},{"text":"","highlight_start":1,"highlight_end":1},{"text":"      enum lifecycle-status { ok }","highlight_start":1,"highlight_end":35},{"text":"","highlight_start":1,"highlight_end":1},{"text":"      get-manifest: func() -> json;","highlight_start":1,"highlight_end":36},{"text":"      on-start: func(ctx: exec-ctx) -> result<lifecycle-status, string>;","highlight_start":1,"highlight_end":73},{"text":"      on-stop: func(ctx: exec-ctx, reason: string) -> result<lifecycle-status, string>;","highlight_start":1,"highlight_end":88},{"text":"      invoke: func(ctx: exec-ctx, op: string, input: json) -> invoke-result;","highlight_start":1,"highlight_end":77},{"text":"      invoke-stream: func(ctx: exec-ctx, op: string, input: json) -> list<stream-event>;","highlight_start":1,"highlight_end":89},{"text":"    }","highlight_start":1,"highlight_end":6},{"text":"","highlight_start":1,"highlight_end":1},{"text":"    world component {","highlight_start":1,"highlight_end":22},{"text":"      import control;","highlight_start":1,"highlight_end":22},{"text":"      export node;","highlight_start":1,"highlight_end":19},{"text":"    }","highlight_start":1,"highlight_end":6},{"text":"    \"#,","highlight_start":1,"highlight_end":8},{"text":"    world: \"component\",","highlight_start":1,"highlight_end":24},{"text":"});","highlight_start":1,"highlight_end":3}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null},"macro_decl_name":"wit_bindgen::generate!","def_site_span":{"file_name":"/Users/maarten/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/wit-bindgen-rust-macro-0.48.1/src/lib.rs","byte_start":528,"byte_end":602,"line_start":15,"line_end":15,"column_start":1,"column_end":75,"is_primary":false,"text":[{"text":"pub fn generate(input: proc_macro::TokenStream) -> proc_macro::TokenStream {","highlight_start":1,"highlight_end":75}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}}],"children":[],"rendered":null},{"message":"expected signature `fn(ExecCtx) -> Result<LifecycleStatus, _>`\n   found signature `fn(ExecCtx) -> Result<(), _>`","code":null,"level":"note","spans":[],"children":[],"rendered":null},{"message":"change the output type to match the trait","code":null,"level":"help","spans":[{"file_name":"src/lib.rs","byte_start":1883,"byte_end":1901,"line_start":81,"line_end":81,"column_start":41,"column_end":59,"is_primary":true,"text":[{"text":"    fn on_start(_ctx: ExportExecCtx) -> Result<(), String> {","highlight_start":41,"highlight_end":59}],"label":null,"suggested_replacement":"Result<LifecycleStatus, std::string::String>","suggestion_applicability":"MachineApplicable","expansion":null}],"children":[],"rendered":null}],"rendered":"\u001b[1m\u001b[91merror[E0053]\u001b[0m\u001b[1m: method `on_start` has an incompatible type for trait\u001b[0m\n  \u001b[1m\u001b[94m--> \u001b[0msrc/lib.rs:81:41\n   \u001b[1m\u001b[94m|\u001b[0m\n\u001b[1m\u001b[94m81\u001b[0m \u001b[1m\u001b[94m|\u001b[0m     fn on_start(_ctx: ExportExecCtx) -> Result<(), String> {\n   \u001b[1m\u001b[94m|\u001b[0m                                         \u001b[1m\u001b[91m^^^^^^^^^^^^^^^^^^\u001b[0m \u001b[1m\u001b[91mexpected `LifecycleStatus`, found `()`\u001b[0m\n   \u001b[1m\u001b[94m|\u001b[0m\n\u001b[1m\u001b[92mnote\u001b[0m: type in trait\n  \u001b[1m\u001b[94m--> \u001b[0msrc/lib.rs:3:1\n   \u001b[1m\u001b[94m|\u001b[0m\n\u001b[1m\u001b[94m 3\u001b[0m \u001b[1m\u001b[94m|\u001b[0m \u001b[1m\u001b[92m/\u001b[0m wit_bindgen::generate!({\n\u001b[1m\u001b[94m 4\u001b[0m \u001b[1m\u001b[94m|\u001b[0m \u001b[1m\u001b[92m|\u001b[0m     inline: r#\"\n\u001b[1m\u001b[94m 5\u001b[0m \u001b[1m\u001b[94m|\u001b[0m \u001b[1m\u001b[92m|\u001b[0m     package greentic:component@0.4.0;\n\u001b[1m\u001b[94m...\u001b[0m  \u001b[1m\u001b[92m|\u001b[0m\n\u001b[1m\u001b[94m66\u001b[0m \u001b[1m\u001b[94m|\u001b[0m \u001b[1m\u001b[92m|\u001b[0m     world: \"component\",\n\u001b[1m\u001b[94m67\u001b[0m \u001b[1m\u001b[94m|\u001b[0m \u001b[1m\u001b[92m|\u001b[0m });\n   \u001b[1m\u001b[94m|\u001b[0m \u001b[1m\u001b[92m|__^\u001b[0m\n   \u001b[1m\u001b[94m= \u001b[0m\u001b[1mnote\u001b[0m: expected signature `fn(ExecCtx) -> Result<\u001b[1m\u001b[35mLifecycleStatus\u001b[0m, _>`\n              found signature `fn(ExecCtx) -> Result<\u001b[1m\u001b[35m()\u001b[0m, _>`\n   \u001b[1m\u001b[94m= \u001b[0m\u001b[1mnote\u001b[0m: this error originates in the macro `wit_bindgen::generate` (in Nightly builds, run with -Z macro-backtrace for more info)\n\u001b[1m\u001b[96mhelp\u001b[0m: change the output type to match the trait\n   \u001b[1m\u001b[94m|\u001b[0m\n\u001b[1m\u001b[94m81\u001b[0m \u001b[91m- \u001b[0m    fn on_start(_ctx: ExportExecCtx) -> \u001b[91mResult<(), String>\u001b[0m {\n\u001b[1m\u001b[94m81\u001b[0m \u001b[92m+ \u001b[0m    fn on_start(_ctx: ExportExecCtx) -> \u001b[92mResult<LifecycleStatus, std::string::String>\u001b[0m {\n   \u001b[1m\u001b[94m|\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"method `on_stop` has an incompatible type for trait","code":{"code":"E0053","explanation":"The parameters of any trait method must match between a trait implementation\nand the trait definition.\n\nErroneous code example:\n\n```compile_fail,E0053\ntrait Foo {\n    fn foo(x: u16);\n    fn bar(&self);\n}\n\nstruct Bar;\n\nimpl Foo for Bar {\n    // error, expected u16, found i16\n    fn foo(x: i16) { }\n\n    // error, types differ in mutability\n    fn bar(&mut self) { }\n}\n```\n"},"level":"error","spans":[{"file_name":"src/lib.rs","byte_start":1982,"byte_end":2000,"line_start":85,"line_end":85,"column_start":57,"column_end":75,"is_primary":true,"text":[{"text":"    fn on_stop(_ctx: ExportExecCtx, _reason: String) -> Result<(), String> {","highlight_start":57,"highlight_end":75}],"label":"expected `LifecycleStatus`, found `()`","suggested_replacement":null,"suggestion_applicability":null,"expansion":null}],"children":[{"message":"type in trait","code":null,"level":"note","spans":[{"file_name":"src/lib.rs","byte_start":24,"byte_end":1538,"line_start":3,"line_end":67,"column_start":1,"column_end":3,"is_primary":true,"text":[{"text":"wit_bindgen::generate!({","highlight_start":1,"highlight_end":25},{"text":"    inline: r#\"","highlight_start":1,"highlight_end":16},{"text":"    package greentic:component@0.4.0;","highlight_start":1,"highlight_end":38},{"text":"","highlight_start":1,"highlight_end":1},{"text":"    interface control {","highlight_start":1,"highlight_end":24},{"text":"      should-cancel: func() -> bool;","highlight_start":1,"highlight_end":37},{"text":"      yield-now: func();","highlight_start":1,"highlight_end":25},{"text":"    }","highlight_start":1,"highlight_end":6},{"text":"","highlight_start":1,"highlight_end":1},{"text":"    interface node {","highlight_start":1,"highlight_end":21},{"text":"      type json = string;","highlight_start":1,"highlight_end":26},{"text":"","highlight_start":1,"highlight_end":1},{"text":"      record tenant-ctx {","highlight_start":1,"highlight_end":26},{"text":"        tenant: string,","highlight_start":1,"highlight_end":24},{"text":"        team: option<string>,","highlight_start":1,"highlight_end":30},{"text":"        user: option<string>,","highlight_start":1,"highlight_end":30},{"text":"        trace-id: option<string>,","highlight_start":1,"highlight_end":34},{"text":"        correlation-id: option<string>,","highlight_start":1,"highlight_end":40},{"text":"        deadline-unix-ms: option<u64>,","highlight_start":1,"highlight_end":39},{"text":"        attempt: u32,","highlight_start":1,"highlight_end":22},{"text":"        idempotency-key: option<string>,","highlight_start":1,"highlight_end":41},{"text":"      }","highlight_start":1,"highlight_end":8},{"text":"","highlight_start":1,"highlight_end":1},{"text":"      record exec-ctx {","highlight_start":1,"highlight_end":24},{"text":"        tenant: tenant-ctx,","highlight_start":1,"highlight_end":28},{"text":"        flow-id: string,","highlight_start":1,"highlight_end":25},{"text":"        node-id: option<string>,","highlight_start":1,"highlight_end":33},{"text":"      }","highlight_start":1,"highlight_end":8},{"text":"","highlight_start":1,"highlight_end":1},{"text":"      record node-error {","highlight_start":1,"highlight_end":26},{"text":"        code: string,","highlight_start":1,"highlight_end":22},{"text":"        message: string,","highlight_start":1,"highlight_end":25},{"text":"        retryable: bool,","highlight_start":1,"highlight_end":25},{"text":"        backoff-ms: option<u64>,","highlight_start":1,"highlight_end":33},{"text":"        details: option<json>,","highlight_start":1,"highlight_end":31},{"text":"      }","highlight_start":1,"highlight_end":8},{"text":"","highlight_start":1,"highlight_end":1},{"text":"      variant invoke-result {","highlight_start":1,"highlight_end":30},{"text":"        ok(json),","highlight_start":1,"highlight_end":18},{"text":"        err(node-error),","highlight_start":1,"highlight_end":25},{"text":"      }","highlight_start":1,"highlight_end":8},{"text":"","highlight_start":1,"highlight_end":1},{"text":"      variant stream-event {","highlight_start":1,"highlight_end":29},{"text":"        data(json),","highlight_start":1,"highlight_end":20},{"text":"        progress(u8),","highlight_start":1,"highlight_end":22},{"text":"        done,","highlight_start":1,"highlight_end":14},{"text":"        error(string),","highlight_start":1,"highlight_end":23},{"text":"      }","highlight_start":1,"highlight_end":8},{"text":"","highlight_start":1,"highlight_end":1},{"text":"      enum lifecycle-status { ok }","highlight_start":1,"highlight_end":35},{"text":"","highlight_start":1,"highlight_end":1},{"text":"      get-manifest: func() -> json;","highlight_start":1,"highlight_end":36},{"text":"      on-start: func(ctx: exec-ctx) -> result<lifecycle-status, string>;","highlight_start":1,"highlight_end":73},{"text":"      on-stop: func(ctx: exec-ctx, reason: string) -> result<lifecycle-status, string>;","highlight_start":1,"highlight_end":88},{"text":"      invoke: func(ctx: exec-ctx, op: string, input: json) -> invoke-result;","highlight_start":1,"highlight_end":77},{"text":"      invoke-stream: func(ctx: exec-ctx, op: string, input: json) -> list<stream-event>;","highlight_start":1,"highlight_end":89},{"text":"    }","highlight_start":1,"highlight_end":6},{"text":"","highlight_start":1,"highlight_end":1},{"text":"    world component {","highlight_start":1,"highlight_end":22},{"text":"      import control;","highlight_start":1,"highlight_end":22},{"text":"      export node;","highlight_start":1,"highlight_end":19},{"text":"    }","highlight_start":1,"highlight_end":6},{"text":"    \"#,","highlight_start":1,"highlight_end":8},{"text":"    world: \"component\",","highlight_start":1,"highlight_end":24},{"text":"});","highlight_start":1,"highlight_end":3}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"src/lib.rs","byte_start":24,"byte_end":1538,"line_start":3,"line_end":67,"column_start":1,"column_end":3,"is_primary":false,"text":[{"text":"wit_bindgen::generate!({","highlight_start":1,"highlight_end":25},{"text":"    inline: r#\"","highlight_start":1,"highlight_end":16},{"text":"    package greentic:component@0.4.0;","highlight_start":1,"highlight_end":38},{"text":"","highlight_start":1,"highlight_end":1},{"text":"    interface control {","highlight_start":1,"highlight_end":24},{"text":"      should-cancel: func() -> bool;","highlight_start":1,"highlight_end":37},{"text":"      yield-now: func();","highlight_start":1,"highlight_end":25},{"text":"    }","highlight_start":1,"highlight_end":6},{"text":"","highlight_start":1,"highlight_end":1},{"text":"    interface node {","highlight_start":1,"highlight_end":21},{"text":"      type json = string;","highlight_start":1,"highlight_end":26},{"text":"","highlight_start":1,"highlight_end":1},{"text":"      record tenant-ctx {","highlight_start":1,"highlight_end":26},{"text":"        tenant: string,","highlight_start":1,"highlight_end":24},{"text":"        team: option<string>,","highlight_start":1,"highlight_end":30},{"text":"        user: option<string>,","highlight_start":1,"highlight_end":30},{"text":"        trace-id: option<string>,","highlight_start":1,"highlight_end":34},{"text":"        correlation-id: option<string>,","highlight_start":1,"highlight_end":40},{"text":"        deadline-unix-ms: option<u64>,","highlight_start":1,"highlight_end":39},{"text":"        attempt: u32,","highlight_start":1,"highlight_end":22},{"text":"        idempotency-key: option<string>,","highlight_start":1,"highlight_end":41},{"text":"      }","highlight_start":1,"highlight_end":8},{"text":"","highlight_start":1,"highlight_end":1},{"text":"      record exec-ctx {","highlight_start":1,"highlight_end":24},{"text":"        tenant: tenant-ctx,","highlight_start":1,"highlight_end":28},{"text":"        flow-id: string,","highlight_start":1,"highlight_end":25},{"text":"        node-id: option<string>,","highlight_start":1,"highlight_end":33},{"text":"      }","highlight_start":1,"highlight_end":8},{"text":"","highlight_start":1,"highlight_end":1},{"text":"      record node-error {","highlight_start":1,"highlight_end":26},{"text":"        code: string,","highlight_start":1,"highlight_end":22},{"text":"        message: string,","highlight_start":1,"highlight_end":25},{"text":"        retryable: bool,","highlight_start":1,"highlight_end":25},{"text":"        backoff-ms: option<u64>,","highlight_start":1,"highlight_end":33},{"text":"        details: option<json>,","highlight_start":1,"highlight_end":31},{"text":"      }","highlight_start":1,"highlight_end":8},{"text":"","highlight_start":1,"highlight_end":1},{"text":"      variant invoke-result {","highlight_start":1,"highlight_end":30},{"text":"        ok(json),","highlight_start":1,"highlight_end":18},{"text":"        err(node-error),","highlight_start":1,"highlight_end":25},{"text":"      }","highlight_start":1,"highlight_end":8},{"text":"","highlight_start":1,"highlight_end":1},{"text":"      variant stream-event {","highlight_start":1,"highlight_end":29},{"text":"        data(json),","highlight_start":1,"highlight_end":20},{"text":"        progress(u8),","highlight_start":1,"highlight_end":22},{"text":"        done,","highlight_start":1,"highlight_end":14},{"text":"        error(string),","highlight_start":1,"highlight_end":23},{"text":"      }","highlight_start":1,"highlight_end":8},{"text":"","highlight_start":1,"highlight_end":1},{"text":"      enum lifecycle-status { ok }","highlight_start":1,"highlight_end":35},{"text":"","highlight_start":1,"highlight_end":1},{"text":"      get-manifest: func() -> json;","highlight_start":1,"highlight_end":36},{"text":"      on-start: func(ctx: exec-ctx) -> result<lifecycle-status, string>;","highlight_start":1,"highlight_end":73},{"text":"      on-stop: func(ctx: exec-ctx, reason: string) -> result<lifecycle-status, string>;","highlight_start":1,"highlight_end":88},{"text":"      invoke: func(ctx: exec-ctx, op: string, input: json) -> invoke-result;","highlight_start":1,"highlight_end":77},{"text":"      invoke-stream: func(ctx: exec-ctx, op: string, input: json) -> list<stream-event>;","highlight_start":1,"highlight_end":89},{"text":"    }","highlight_start":1,"highlight_end":6},{"text":"","highlight_start":1,"highlight_end":1},{"text":"    world component {","highlight_start":1,"highlight_end":22},{"text":"      import control;","highlight_start":1,"highlight_end":22},{"text":"      export node;","highlight_start":1,"highlight_end":19},{"text":"    }","highlight_start":1,"highlight_end":6},{"text":"    \"#,","highlight_start":1,"highlight_end":8},{"text":"    world: \"component\",","highlight_start":1,"highlight_end":24},{"text":"});","highlight_start":1,"highlight_end":3}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null},"macro_decl_name":"wit_bindgen::generate!","def_site_span":{"file_name":"/Users/maarten/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/wit-bindgen-rust-macro-0.48.1/src/lib.rs","byte_start":528,"byte_end":602,"line_start":15,"line_end":15,"column_start":1,"column_end":75,"is_primary":false,"text":[{"text":"pub fn generate(input: proc_macro::TokenStream) -> proc_macro::TokenStream {","highlight_start":1,"highlight_end":75}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}}],"children":[],"rendered":null},{"message":"expected signature `fn(ExecCtx, std::string::String) -> Result<LifecycleStatus, _>`\n   found signature `fn(ExecCtx, std::string::String) -> Result<(), _>`","code":null,"level":"note","spans":[],"children":[],"rendered":null},{"message":"change the output type to match the trait","code":null,"level":"help","spans":[{"file_name":"src/lib.rs","byte_start":1982,"byte_end":2000,"line_start":85,"line_end":85,"column_start":57,"column_end":75,"is_primary":true,"text":[{"text":"    fn on_stop(_ctx: ExportExecCtx, _reason: String) -> Result<(), String> {","highlight_start":57,"highlight_end":75}],"label":null,"suggested_replacement":"Result<LifecycleStatus, std::string::String>","suggestion_applicability":"MachineApplicable","expansion":null}],"children":[],"rendered":null}],"rendered":"\u001b[1m\u001b[91merror[E0053]\u001b[0m\u001b[1m: method `on_stop` has an incompatible type for trait\u001b[0m\n  \u001b[1m\u001b[94m--> \u001b[0msrc/lib.rs:85:57\n   \u001b[1m\u001b[94m|\u001b[0m\n\u001b[1m\u001b[94m85\u001b[0m \u001b[1m\u001b[94m|\u001b[0m     fn on_stop(_ctx: ExportExecCtx, _reason: String) -> Result<(), String> {\n   \u001b[1m\u001b[94m|\u001b[0m                                                         \u001b[1m\u001b[91m^^^^^^^^^^^^^^^^^^\u001b[0m \u001b[1m\u001b[91mexpected `LifecycleStatus`, found `()`\u001b[0m\n   \u001b[1m\u001b[94m|\u001b[0m\n\u001b[1m\u001b[92mnote\u001b[0m: type in trait\n  \u001b[1m\u001b[94m--> \u001b[0msrc/lib.rs:3:1\n   \u001b[1m\u001b[94m|\u001b[0m\n\u001b[1m\u001b[94m 3\u001b[0m \u001b[1m\u001b[94m|\u001b[0m \u001b[1m\u001b[92m/\u001b[0m wit_bindgen::generate!({\n\u001b[1m\u001b[94m 4\u001b[0m \u001b[1m\u001b[94m|\u001b[0m \u001b[1m\u001b[92m|\u001b[0m     inline: r#\"\n\u001b[1m\u001b[94m 5\u001b[0m \u001b[1m\u001b[94m|\u001b[0m \u001b[1m\u001b[92m|\u001b[0m     package greentic:component@0.4.0;\n\u001b[1m\u001b[94m...\u001b[0m  \u001b[1m\u001b[92m|\u001b[0m\n\u001b[1m\u001b[94m66\u001b[0m \u001b[1m\u001b[94m|\u001b[0m \u001b[1m\u001b[92m|\u001b[0m     world: \"component\",\n\u001b[1m\u001b[94m67\u001b[0m \u001b[1m\u001b[94m|\u001b[0m \u001b[1m\u001b[92m|\u001b[0m });\n   \u001b[1m\u001b[94m|\u001b[0m \u001b[1m\u001b[92m|__^\u001b[0m\n   \u001b[1m\u001b[94m= \u001b[0m\u001b[1mnote\u001b[0m: expected signature `fn(ExecCtx, std::string::String) -> Result<\u001b[1m\u001b[35mLifecycleStatus\u001b[0m, _>`\n              found signature `fn(ExecCtx, std::string::String) -> Result<\u001b[1m\u001b[35m()\u001b[0m, _>`\n   \u001b[1m\u001b[94m= \u001b[0m\u001b[1mnote\u001b[0m: this error originates in the macro `wit_bindgen::generate` (in Nightly builds, run with -Z macro-backtrace for more info)\n\u001b[1m\u001b[96mhelp\u001b[0m: change the output type to match the trait\n   \u001b[1m\u001b[94m|\u001b[0m\n\u001b[1m\u001b[94m85\u001b[0m \u001b[91m- \u001b[0m    fn on_stop(_ctx: ExportExecCtx, _reason: String) -> \u001b[91mResult<(), String>\u001b[0m {\n\u001b[1m\u001b[94m85\u001b[0m \u001b[92m+ \u001b[0m    fn on_stop(_ctx: ExportExecCtx, _reason: String) -> \u001b[92mResult<LifecycleStatus, std::string::String>\u001b[0m {\n   \u001b[1m\u001b[94m|\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"aborting due to 2 previous errors","code":null,"level":"error","spans":[],"children":[],"rendered":"\u001b[1m\u001b[91merror\u001b[0m\u001b[1m: aborting due to 2 previous errors\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"For more information about this error, try `rustc --explain E0053`.","code":null,"level":"failure-note","spans":[],"children":[],"rendered":"\u001b[1mFor more information about this error, try `rustc --explain E0053`.\u001b[0m\n"}
