// SPDX-License-Identifier: MIT

package greentic:types-core@0.4.0;

interface types {
  /// identifiers
  type flow-id = string;
  type tenant-id = string;
  type team-id = string;
  type user-id = string;

  /// clouds & platforms (keep enums stable; add variants only in minor bumps)
  enum cloud { aws, gcp, azure, hetzner, local, other }
  enum platform { k8s, nomad, systemd, cfworkers, lambda, baremetal, other }

  /// flow deployment context supplied by hosts
  record deployment-ctx {
    cloud: cloud,
    region: option<string>,
    platform: platform,
    runtime: option<string>,
  }

  /// tenant identity and invocation metadata
  record tenant-ctx {
    tenant: tenant-id,
    team: option<team-id>,
    user: option<user-id>,
    deployment: deployment-ctx,
    trace-id: option<string>,
    session-id: option<string>,
    flow-id: option<string>,
    node-id: option<string>,
    provider-id: option<string>,
  }
}

world core {
  export types;
}
